{% extends 'base.html' %}
{% load static %}

{% block title %}Login ‚Äì Martin Freimuth{% endblock %}
{% block meta_description %}Melden Sie sich an um Zugriff auf alle Projekte und das Secret Lab zu erhalten.{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-6 py-20 
            bg-gradient-to-br from-gray-50 to-gray-100 
            dark:from-gray-900 dark:to-black">
    
    <div class="w-full max-w-md">
        <!-- Header -->
        <div class="text-center mb-10">
            <div class="text-6xl mb-6">üîê</div>
            <h1 class="text-4xl md:text-5xl font-black mb-4 
                       text-gray-900 dark:text-white">
                Willkommen zur√ºck!
            </h1>
            <p class="text-lg text-gray-600 dark:text-gray-400">
                Melde dich an um das <span class="text-red-600 dark:text-red-400 font-bold">Secret Lab</span> zu betreten
            </p>
        </div>

        <!-- Login Form Card -->
        <div class="bg-white dark:bg-gray-800/50 backdrop-blur 
                    rounded-3xl p-10 
                    border-2 border-gray-200 dark:border-gray-700 
                    shadow-2xl">
            
            <!-- Error Messages -->
            {% if form.errors %}
            <div class="mb-8 p-5 
                        bg-red-50 dark:bg-red-900/30 
                        border-2 border-red-500 
                        rounded-xl">
                <div class="flex items-start gap-3">
                    <span class="text-2xl">‚ö†Ô∏è</span>
                    <div>
                        <strong class="text-red-700 dark:text-red-400 font-bold block mb-2">
                            Login fehlgeschlagen
                        </strong>
                        {% if form.non_field_errors %}
                            <p class="text-red-600 dark:text-red-300">
                                {{ form.non_field_errors }}
                            </p>
                        {% else %}
                            <p class="text-red-600 dark:text-red-300">
                                Bitte √ºberpr√ºfe deinen Benutzernamen und dein Passwort.
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Form -->
            <form method="post" class="space-y-6">
                {% csrf_token %}

                <!-- Username Field -->
                <div>
                    <label for="{{ form.login.id_for_label }}" 
                           class="block mb-2 font-bold text-gray-900 dark:text-white">
                        Benutzername oder E-Mail
                    </label>
                    <input type="text" 
                           name="login" 
                           id="{{ form.login.id_for_label }}"
                           required
                           class="w-full px-4 py-3 
                                  bg-gray-50 dark:bg-gray-900/70 
                                  border-2 border-gray-300 dark:border-gray-600 
                                  rounded-xl 
                                  text-gray-900 dark:text-white
                                  placeholder-gray-500 dark:placeholder-gray-400
                                  focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20
                                  focus:outline-none transition"
                           placeholder="deine@email.com">
                    {% if form.login.errors %}
                        <p class="mt-2 text-sm text-red-600 dark:text-red-400">
                            {{ form.login.errors }}
                        </p>
                    {% endif %}
                </div>

                <!-- Password Field -->
                <div>
                    <label for="{{ form.password.id_for_label }}" 
                           class="block mb-2 font-bold text-gray-900 dark:text-white">
                        Passwort
                    </label>
                    <input type="password" 
                           name="password" 
                           id="{{ form.password.id_for_label }}"
                           required
                           class="w-full px-4 py-3 
                                  bg-gray-50 dark:bg-gray-900/70 
                                  border-2 border-gray-300 dark:border-gray-600 
                                  rounded-xl 
                                  text-gray-900 dark:text-white
                                  placeholder-gray-500 dark:placeholder-gray-400
                                  focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20
                                  focus:outline-none transition"
                           placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    {% if form.password.errors %}
                        <p class="mt-2 text-sm text-red-600 dark:text-red-400">
                            {{ form.password.errors }}
                        </p>
                    {% endif %}
                </div>

                <!-- Remember Me -->
                <div class="flex items-center">
                    <input type="checkbox" 
                           name="remember" 
                           id="remember"
                           class="w-4 h-4 text-purple-600 
                                  bg-gray-100 dark:bg-gray-700
                                  border-gray-300 dark:border-gray-600
                                  rounded focus:ring-purple-500 focus:ring-2">
                    <label for="remember" 
                           class="ml-2 text-sm text-gray-700 dark:text-gray-300">
                        Angemeldet bleiben
                    </label>
                </div>

                <!-- Submit Button -->
                <button type="submit" 
                        class="w-full py-4 
                               bg-gradient-to-r from-purple-600 to-pink-600 
                               hover:from-purple-500 hover:to-pink-500
                               text-white font-bold text-lg rounded-xl 
                               transition shadow-xl hover:shadow-2xl 
                               hover:scale-105">
                    üöÄ Anmelden & Secret Lab betreten
                </button>

                <!-- Hidden Redirect -->
                <input type="hidden" name="next" value="{{ next }}">
            </form>

            <!-- Divider -->
            <div class="relative my-8">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300 dark:border-gray-700"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-4 bg-white dark:bg-gray-800 
                                 text-gray-600 dark:text-gray-400">
                        Noch kein Account?
                    </span>
                </div>
            </div>

            <!-- Register Link -->
            <div class="text-center">
                <a href="{% url 'account_signup' %}" 
                   class="inline-flex items-center gap-2 px-8 py-3 
                          bg-gray-200 dark:bg-gray-700 
                          hover:bg-gray-300 dark:hover:bg-gray-600
                          text-gray-900 dark:text-white
                          font-bold rounded-xl 
                          transition shadow-lg">
                    ‚ú® Jetzt kostenlos registrieren
                </a>
            </div>
        </div>

        <!-- Back to Home -->
        <div class="text-center mt-8">
            <a href="{% url 'core:home' %}" 
               class="text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 
                      font-medium transition">
                ‚Üê Zur√ºck zur Startseite
            </a>
        </div>
    </div>
</div>
{% endblock %}